<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MHP |Register</title>

    <!-- ICON  -->
    <link rel="shortcut icon" href="{{ url_for('static', filename='image/logo-top.png') }}" type="image/x-icon">
    <link rel="icon" href="{{ url_for('static', filename='image/logo-top.png') }}" type="image/x-icon">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="../static/login-register.css">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

</head>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    });
    toastr.options = {
        "closeButton": true,
        "debug": false,
        "newestOnTop": false,
        "progressBar": true,
        "positionClass": "toast-top-right",
        "preventDuplicates": false,
        "onclick": null,
        "showDuration": "300",
        "hideDuration": "1000",
        "timeOut": "5000",
        "extendedTimeOut": "1000",
        "showEasing": "swing",
        "hideEasing": "linear",
        "showMethod": "fadeIn",
        "hideMethod": "fadeOut"
    }
    toastr["error"]("you forgot something !", "error")
    toastr["success"]("I do not think that means what you think it means.", "succes")
    toastr["warning"]("Have fun storming the castle!", "succes")

    function register() {
        let username = $('#username').val();
        if (!username) {
            toastr.warning('Please enter your username');
            return;
        }
        let password = $('#password').val(); // Mengambil nilai dari input password
        if (!password) {
            toastr.warning('Please enter your password');
            return;
        } else if (password.length < 8) {
            toastr.warning('Password must be at least 8 characters long');
            return;
        }

        let password2 = $('#password2').val(); // Mengambil nilai dari input konfirmasi password
        if (!password2) {
            toastr.warning('Please enter your password confirmation');
            return;
        } else if (password2.length < 8) {
            toastr.warning('Password confirmation must be at least 8 characters long');
            return;
        }

        if (password !== password2) {
            toastr.warning('Password and password confirmation do not match');
            return;
        }

        console.log(username, password);
        $.ajax({
            type: "POST",
            url: "/register",
            data: {
                username: username,
                password: password,
            },
            success: function (response) {
                if (response['result'] === 'success') {
                    toastr.success("Registration complete!");
                    window.location.href = "/login";
                } else {
                    alert(response['msg']);
                }
            },
        });
    }
</script>
<style>
    .toast {
        background-color: #000000;
    }

    /* Mengubah warna teks dan ikon notifikasi menjadi kuning */
    .toast-message,
    .toast-warning {
        color: #ffffff;
    }
</style>

<body>

    <div class="regis-container">
        <img src="../static/image/logo.png" alt="" style="max-width: 75px; margin: 20px;">

        <div class="form-floating mb-3">
            <input type="text" class="form-control" id="username" placeholder="Username" name="username">
            <label for="floatingInput">Username</label>
        </div>
        <div class="form-floating mb-3">
            <input type="password" class="form-control" id="password" placeholder="password" name="password">
            <label for="floatingPassword">Password</label>
        </div>
        <div class="form-floating">
            <input type="password" class="form-control" id="password2" placeholder="Password" name="password2">
            <label for="floatingPassword">Password</label>
        </div>

        <button type="button" class="btn btn-outline-dark" onclick="register()">Register</button>

        <span class="flex-row">Already have an account?<a onclick="window.location.href='/login'">Login</a></span>

    </div>

    <div id="notification-container"></div>

    <!-- <script src="../static/main.js"></script> -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>

</html>